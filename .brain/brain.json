{
    "meta": {
        "schema_version": "1.1.0",
        "awf_version": "3.3.0"
    },
    "project": {
        "name": "Builder Ecosystem Clone",
        "type": "Community & Education Platform",
        "status": "Deployed (Production)"
    },
    "tech_stack": {
        "frontend": {
            "framework": "Next.js 16.1.3 (App Router)",
            "language": "TypeScript",
            "ui_library": "Shadcn/UI",
            "styling": "TailwindCSS"
        },
        "backend": {
            "framework": "Next.js Server Actions",
            "database": "Supabase (PostgreSQL)",
            "auth": "Supabase Auth"
        },
        "database": {
            "type": "PostgreSQL (via Supabase)",
            "orm": "None (Raw SQL / Supabase Client)"
        },
        "deployment": {
            "server": "VPS (Ubuntu 22.04)",
            "panel": "aaPanel",
            "web_server": "Nginx (Reverse Proxy)",
            "process_manager": "PM2",
            "node_version": "20.x"
        }
    },
    "database_schema": {
        "summary": "Project uses a modular schema with core tables + feature-specific modules.",
        "modules": [
            "COMPLETE_SETUP.sql (Core)",
            "badges.sql (Gamification)",
            "chat.sql (Messaging)",
            "follows.sql (Social Graph)",
            "likes_comments.sql (Engagement)",
            "notifications.sql (System)",
            "xp_system.sql (Gamification Logic)",
            "migrations/20260127_add_topic_to_posts.sql (Topic Filter)",
            "migrations/20260130_create_notes_tables.sql (Tủ Lạnh Module)"
        ],
        "tulanh_tables": [
            {
                "name": "notes",
                "columns": [
                    "id",
                    "user_id",
                    "title",
                    "content",
                    "is_url",
                    "url",
                    "url_title",
                    "url_description",
                    "url_fetched_at",
                    "created_at",
                    "updated_at"
                ],
                "description": "Lưu ghi chú Markdown và URL bookmarks"
            },
            {
                "name": "tags",
                "columns": [
                    "id",
                    "user_id",
                    "name",
                    "slug",
                    "parent_id",
                    "level",
                    "created_at"
                ],
                "description": "Hierarchical tags với parent_id tự tham chiếu"
            },
            {
                "name": "note_tags",
                "columns": [
                    "note_id",
                    "tag_id",
                    "created_at"
                ],
                "description": "Junction table many-to-many giữa notes và tags"
            }
        ],
        "relationships_explained": "Users have Profiles. Users can Follow each other. Posts can be Liked/Commented. Users earn XP and Badges. Posts have 'topic' column (Youtube/MMO/Share). NOTES: Users have many Notes. Notes have many Tags (via note_tags). Tags can be hierarchical (parent_id)."
    },
    "features": [
        {
            "name": "Auth",
            "status": "Implemented",
            "description": "User authentication via Supabase"
        },
        {
            "name": "Gamification",
            "status": "In Progress",
            "description": "XP System, Ranks (1-5), Badges, Leaderboards"
        },
        {
            "name": "Community",
            "status": "Active",
            "description": "Newsfeed, Posts, Likes, Comments, Topic Filtering (Youtube/MMO/Share)"
        },
        {
            "name": "UI/UX",
            "status": "Implemented",
            "description": "Deep Glass Theme (Dark Mode Optimized), Rank Badges, Pill Filters"
        },
        {
            "name": "Classroom",
            "status": "Planned",
            "description": "Course catalog and lesson viewer"
        },
        {
            "name": "Productivity Tools",
            "status": "Implemented",
            "description": "Todos, Journal, Pomodoro Timer"
        },
        {
            "name": "Tủ Lạnh (MarkNote)",
            "status": "Implemented",
            "description": "Note-taking with Markdown, URL bookmarking with auto metadata, Hierarchical tags, Search. Route: /notes"
        }
    ],
    "knowledge_items": {
        "gotchas": [
            "useEffect with loading state in dependencies can cause infinite loops - remove loading from deps array",
            "Supabase Edge Functions require Deno types which conflict with TypeScript - exclude from tsconfig"
        ],
        "patterns": [
            "Supabase RLS for security",
            "Next.js Server Components for data fetching",
            "Internationalization (i18n): Full En/Vi support via LanguageContext",
            "PostCard Refactor: Split into sub-components (Header, Content, Actions, Comments, Approval)",
            "Server Actions for CRUD with error handling: return { success, data, error }",
            "URL metadata fetching: Parse HTML for og:title, og:description, fallback to <title>",
            "Hierarchical tags stored as paths (parent/child) with denormalized 'level' column",
            "Debounced search with useEffect + setTimeout pattern",
            "TagTree component with recursive rendering for hierarchical display"
        ]
    }
}